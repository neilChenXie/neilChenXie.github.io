<!DOCTYPE html>
<html lang="en-us">

<head>
  <meta charset="UTF-8">
  <meta name="baidu-site-verification" content="XuznPXuk19" />
  <title>Jekyll博客标签页及Liquid经验</title>
  <meta name="Description" content="">
  <meta name="Keywords" content="jekyll,liquid,">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <link rel="stylesheet" href="/css/normalize.css">
  <link rel="stylesheet" href="/css/cayman.css">
  <link rel="stylesheet" href="/css/custome.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/tag.css">
  <script src="/js/jquery-3.1.0.min.js"></script>
  <script src="/js/toc.js"></script>
  <script src="/js/tocUse.js"></script>
</head>


<body class="body-vertical">

	<section class="left-slide">
		<div id="big_toc"></div>
	</section>
    <section class="main-content main-content-vertical main-article-content">

        <h2>Jekyll博客标签页及Liquid经验
        </h2>
        <p class="meta">
            <span>Created:&nbsp;17 Nov 2016<span>
        </p>
        <p class="meta">
            <span>Author:&nbsp;&nbsp;Chen Xie<span>
        </p>

		<div id="tiny_toc"></div>

		<blockquote>
  <p>博客的标签页基本是一个不可或缺的功能，它能更灵活地将博客按多类别体系组织起来。
jekyll会存储文章的标签信息，但是不会生成以标签组织的静态页面，所以需要利用<strong>Collection</strong>机制来生成。</p>
</blockquote>

<h3 id="tag-cloud-页面">Tag Cloud 页面</h3>

<blockquote>
  <p>所有标签展示页</p>
</blockquote>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: page
permalink: /tags/
---

<span class="nt">&lt;h1&gt;</span>Tag Cloud<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"tag-meta"</span><span class="nt">&gt;</span>
	{% assign tags = site.tags | sort %}
	{% for tag in tags %}
	<span class="nt">&lt;li&gt;</span>
	<span class="nt">&lt;a</span> <span class="na">class=</span><span class="s">"tag-link"</span> <span class="na">href=</span><span class="s">"{{ site.baseurl }}/tag/{{ tag | first | slugify }}/"</span>
		<span class="na">style=</span><span class="s">"font-size: {{ tag | last | size  |  times: 4 | plus: 90  }}%"</span><span class="nt">&gt;</span>
		<span class="c">&lt;!--&lt;a href="{{ site.baseurl }}/tag/{{ tag | first | slugify }}/"&gt;--&gt;</span>
		<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term"</span><span class="nt">&gt;</span>{{ tag[0] | replace:'-', ' ' }}<span class="nt">&lt;/span&gt;&lt;span</span> <span class="na">class=</span><span class="s">"count"</span><span class="nt">&gt;</span>{{ tag | last | size }}<span class="nt">&lt;/span&gt;</span>
	<span class="nt">&lt;/a&gt;</span>
	<span class="nt">&lt;/li&gt;</span>
	{% endfor %}
<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

<h3 id="tag详情页">Tag详情页</h3>

<blockquote>
  <p>jekyll博客是静态页面，要访问<code class="language-plaintext highlighter-rouge">/tag/hello/</code>,就需要生成<code class="language-plaintext highlighter-rouge">_site/tag/hello/index.html</code>文件，但是jekll默认不会生成以标签组织的静态页面，所以需要利用Collection机制来生成。</p>
</blockquote>

<h4 id="_configyml">_config.yml</h4>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#声明collection</span>
<span class="na">collections</span><span class="pi">:</span>
  <span class="na">tags_page</span><span class="pi">:</span>                    <span class="c1">#自定义，根目录下文件夹_tags_page</span>
      <span class="na">output</span><span class="pi">:</span> <span class="kc">true</span>              <span class="c1">#生成静态页面</span>

<span class="c1">#tag_page统一yml头信息</span>
<span class="na">defaults</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">scope</span><span class="pi">:</span>
        <span class="na">path</span><span class="pi">:</span> <span class="s2">"</span><span class="s">"</span>                <span class="c1">#所有路径下</span>
        <span class="na">type</span><span class="pi">:</span> <span class="s">tags_page</span>         <span class="c1">#指明类别</span>
      <span class="na">values</span><span class="pi">:</span>
        <span class="na">layout</span><span class="pi">:</span> <span class="s">page_tag</span>        <span class="c1">#声明layout</span>
        <span class="na">permalink</span><span class="pi">:</span> <span class="s">/tag/:title/</span>  <span class="c1">#链接</span>
</code></pre></div></div>

<h4 id="文件">文件</h4>

<p>1  根目录下生成<code class="language-plaintext highlighter-rouge">_tags_page/</code>文件夹，注意<code class="language-plaintext highlighter-rouge">_</code>。该目录下的文件对应一个详情页。</p>

<blockquote>
  <p>e.g. <code class="language-plaintext highlighter-rouge">jekyll</code> tag:</p>
</blockquote>

<blockquote>
  <p><code class="language-plaintext highlighter-rouge">jekyll.html</code></p>
  <div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
---
</code></pre></div>  </div>
</blockquote>

<p>2  <code class="language-plaintext highlighter-rouge">_layouts/page_tag.html</code> 用于详情页的layout</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>---
layout: page-horizontal
---

{% if site.tags[page.slug] %}
	{% for post in site.tags[page.slug] %}
	<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ site.baseurl }}{{ post.url }}"</span> <span class="na">title=</span><span class="s">"{{ post.title }}"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"article-list-h3"</span><span class="nt">&gt;</span>{{ post.title }}<span class="nt">&lt;/h3&gt;</span>
	<span class="nt">&lt;/a&gt;</span>
		<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"article-list-date"</span><span class="nt">&gt;</span>
			{{ post.date | date: "%B %-d, %Y" }}
		<span class="nt">&lt;/span&gt;</span>
	<span class="nt">&lt;p&gt;</span>{{ post.content | truncatewords:50 | strip_html }}<span class="nt">&lt;/p&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"article-list-footer"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;ul</span> <span class="na">class=</span><span class="s">"article-list-tags"</span><span class="nt">&gt;</span>
			{% for tag in post.tags %}
			<span class="nt">&lt;li&gt;</span>
			<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{{ site.baseurl }}/tag/{{ tag }}"</span> <span class="na">class=</span><span class="s">"tag-link"</span> <span class="na">title=</span><span class="s">"See all posts by this tag"</span><span class="nt">&gt;</span>
				<span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"term_only"</span><span class="nt">&gt;</span> {{ tag }}<span class="nt">&lt;/span&gt;</span>
			<span class="nt">&lt;/a&gt;</span>
			<span class="nt">&lt;/li&gt;</span>
			{% endfor %}
		<span class="nt">&lt;/ul&gt;</span>
	{% endfor %}
{% else %}
<span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"article-empty"</span><span class="nt">&gt;</span>
There are no posts in {{ page.slug }}.
<span class="nt">&lt;/p&gt;</span>
{% endif %}
</code></pre></div></div>

<h4 id="reference">Reference</h4>

<ul>
  <li><a href="https://jekyllrb.com/docs/permalinks/">permalink变量</a></li>
  <li><a href="https://jekyllrb.com/docs/configuration/">_config.yml配置</a></li>
  <li><a href="https://jekyllrb.com/docs/collections/">Collection</a></li>
</ul>

<h3 id="liquid语言">Liquid语言</h3>

<p>liquid等模板语言，对于静态化页面的灵活性提高，有重要的作用</p>

<h4 id="技巧及总结">技巧及总结</h4>

<ol>
  <li><a href="http://blog.csdn.net/dont27/article/details/38097581">中文入门 liquid用法笔记 </a></li>
  <li><a href="https://github.com/Shopify/liquid/wiki/liquid-for-designers">英文入门 Liquid for designers</a></li>
  <li><a href="http://shopify.github.io/liquid/">liquid官网</a></li>
</ol>


        <!--Links-->
        <span class="tag-list">
            #
            
            <a class="tag-link" href="/tag/jekyll/">jekyll</a>
            
            <a class="tag-link" href="/tag/liquid/">liquid</a>
            
        </span>
        <footer class="site-footer">
  <span class="site-footer-owner"><a href="http://www.chenxie.fun/">Chen Blog</a> is maintained by <a href="/about">Chen Xie</a>.</span>
  <span class="site-footer-credits">Source code is keep by GitHub account: <a href="https://github.com/neilChenXie">Chen Xie</a>.</span>
</footer>


    </section>

</body>
</html>
